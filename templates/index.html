{{! This Source Code Form is subject to the terms of the Mozilla Public
    License, v. 2.0. If a copy of the MPL was not distributed with this
    file, You can obtain one at http://mozilla.org/MPL/2.0/. }}
<!DOCTYPE HTML>
<html>
  <head>
    <title>{{title}}</title>
    <link rel='stylesheet' href='/style.css'>
  </head>
  <body>

    <!-- Nav -->
    <nav>
      <a href='#about'>About</a>
      <a href='#app'>SRI Generator</a>
      <br class='clear'>
    </nav>

    <!-- Banner -->
    <div id='app' class='container'>
      <div class='container' id='sriAppContainer'>
        <!-- section to be replaced with react app -->
        <div id='sriApp'>
          <h1>SRI Generator</h1>
          <div>Enter the URL of the resource you wish to use:</div>
          <form method='POST' action='/hash' target='sriSnippet'>
            <input name='url' type='text' value='' placeholder='Resource URL' required>
            <input type='submit' value='Hash!'>
            <div id='algorithms'>
              <label>
                <input name='algorithms' value='sha-512' type='checkbox'>
                <span>sha-512</span>
              </label>
              <label>
                <input name='algorithms' value='sha-256' type='checkbox' checked>
                <span>sha-256</span>
              </label>
            </div>
          </form>
          <iframe id='sriSnippet' name='sriSnippet' frameborder='0'></iframe>
          <style>
            #sriApp iframe#sriSnippet {
              width: calc(100% - 2rem);
              height: 5rem;
              background-color: #666;
              padding: 1rem;
              border-left: 3px solid #444;
              background-color: #666;
              margin: 0;
              margin-top: 1rem;
            }
          </style>
        </div>
        <!-- end section -->
      </div>
    </div>

    <!-- About -->
    <div id='about' class='container'>
      <h3>What is Sub-resource integrity?</h3>
      <p>SRI is a new <a href='http://www.w3.org/TR/SRI/'>W3C specification</a> that allows web developers to ensure that third-party resources have not been tampered with. Use of SRI is recommended as a best-practice, whenever libraries are loaded from a third-party source.</p>
      <hr>

      <h3>How is Sub-resource integrity different to HTTPS?</h3>
      <p>HTTPS only ensures that the transport layer has not been compromised. The resource itself may be modified to contain malicious instructions, yet still be served with a valid certificate. SRI, on the other hand, guarantees that a resource has not since been tampered with, and is transport-layer-agnostic.</p>
      <hr>

      <h3>How can I generate Integrity hashes?</h3>
      <p>Use the <a href='#'>Generator</a>, Grunt plugin or npm module.</p>
      <p>
        Alternatively, you can use the following shell command:<br />
        <code>
          cat <strong>FILENAME.js</strong> |<br />
          openssl dgst -sha256 -binary |<br />
          openssl enc -base64 -A |<br />
          sed -e 's/+/-/g' -e 's/\//_/g' -e 's/=*$//g'<br />
        </code>
      </p>
      <hr>

      <h3>Test your browser</h3>
      <p>To verify whether or not your browser supports sub-resource integrity, open this <a href='https://btoews.github.io/sri_test/'>test page</a>.</p>
      <p>If it doesn't, download the latest version of <a href='https://www.mozilla.org/firefox/new/'>Firefox</a> or <a href='https://www.google.com/chrome/'>Chrome</a> and try again.</p>
    </div>
    <hr>

    <!-- Footer -->
    <footer class='container'>
      The code behind this service is hosted on <a href='https://github.com/mozilla/srihash.org'>Github</a> and is licensed under the <a href='https://www.mozilla.org/MPL/2.0/'>Mozilla Public License 2.0</a>.
    </footer>

  </body>
</html>
